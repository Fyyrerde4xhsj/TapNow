<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mreward PRO - Earn Daily</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: white; font-family: 'sans-serif'; }
        .glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px; }
        .coin-float { animation: float 3s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .nav-active { color: #f6e05e; transform: scale(1.1); }
        .hidden-section { display: none; }
    </style>
</head>
<body class="pb-20">

    <div class="p-6 flex justify-between items-center">
        <div>
            <h1 class="text-xl font-bold">Mreward PRO ğŸš€</h1>
            <p class="text-xs opacity-80" id="user-id">Loading ID...</p>
        </div>
        <div class="glass px-4 py-2 flex items-center gap-2">
            <span class="text-yellow-400 coin-float">ğŸª™</span>
            <span id="balance" class="font-bold text-lg">0</span>
        </div>
    </div>

    <main class="px-4">
        <section id="home" class="space-y-4">
            <div class="glass p-4 text-center">
                <h3 class="font-bold mb-3">ğŸ“… Daily Streak</h3>
                <div class="flex justify-between gap-1" id="daily-calendar">
                    </div>
                <button onclick="claimDaily()" id="claim-btn" class="mt-4 bg-yellow-500 hover:bg-yellow-400 text-purple-900 font-bold py-2 px-8 rounded-full shadow-lg transition-all">Claim Day 1</button>
            </div>

            <div class="glass p-4">
                <h3 class="font-bold mb-2">ğŸ”¥ Premium Surveys</h3>
                <div class="bg-white rounded-lg h-40 flex items-center justify-center text-gray-500">
                    <p class="text-sm px-4 text-center">Complete surveys to earn +500 coins instantly!</p>
                </div>
                <button class="w-full mt-2 bg-blue-500 py-2 rounded-lg font-bold">Open Offerwall</button>
            </div>

            <div id="tasks-list" class="space-y-3">
                <h3 class="font-bold">ğŸ¯ Available Tasks</h3>
                </div>
        </section>

        <section id="refer" class="hidden-section space-y-6">
            <div class="glass p-6 text-center">
                <div class="text-5xl mb-4">ğŸ</div>
                <h2 class="text-2xl font-bold">Refer & Earn</h2>
                <p class="opacity-80">Share with friends and get 200 coins each!</p>
                <div class="mt-6 p-4 bg-black bg-opacity-20 rounded-xl border-dashed border-2 border-white/30">
                    <span id="ref-code" class="text-2xl font-mono font-bold tracking-widest">LOADING</span>
                </div>
                <div class="flex gap-2 mt-4">
                    <button onclick="copyRef()" class="flex-1 bg-white/20 py-3 rounded-lg"><i class="fas fa-copy"></i> Copy</button>
                    <button onclick="shareWA()" class="flex-1 bg-green-500 py-3 rounded-lg text-white"><i class="fab fa-whatsapp"></i> Share</button>
                </div>
            </div>
        </section>

        <section id="wallet" class="hidden-section space-y-4">
            <div class="glass p-6 text-center">
                <p class="text-sm opacity-80 uppercase">Available Balance</p>
                <h2 class="text-4xl font-bold text-yellow-400">ğŸª™ <span id="wallet-balance">0</span></h2>
            </div>
            <div class="space-y-3">
                <div class="glass p-4 flex justify-between items-center">
                    <div>
                        <p class="font-bold">UPI Transfer</p>
                        <p class="text-xs opacity-60">Min: 2000 coins</p>
                    </div>
                    <button onclick="withdraw(2000, 'UPI')" class="bg-purple-500 px-4 py-2 rounded-lg text-sm">Redeem</button>
                </div>
                <div class="glass p-4 flex justify-between items-center">
                    <div>
                        <p class="font-bold">Paytm Cash</p>
                        <p class="text-xs opacity-60">Min: 5000 coins</p>
                    </div>
                    <button onclick="withdraw(5000, 'Paytm')" class="bg-purple-500 px-4 py-2 rounded-lg text-sm">Redeem</button>
                </div>
            </div>
        </section>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 glass m-4 mb-6 py-3 px-8 flex justify-between items-center">
        <button onclick="showPage('home')" class="nav-btn nav-active" id="nav-home"><i class="fas fa-home text-xl"></i></button>
        <button onclick="showPage('refer')" class="nav-btn" id="nav-refer"><i class="fas fa-user-plus text-xl"></i></button>
        <button onclick="showPage('wallet')" class="nav-btn" id="nav-wallet"><i class="fas fa-wallet text-xl"></i></button>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, get, onValue, update, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            // PASTE YOUR FIREBASE CONFIG HERE
            apiKey: "...",
            authDomain: "...",
            databaseURL: "...",
            projectId: "...",
            storageBucket: "...",
            messagingSenderId: "...",
            appId: "..."
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Simple User Session (In production, use Firebase Auth)
        let userId = localStorage.getItem('mreward_user') || 'user_' + Math.floor(Math.random() * 10000);
        localStorage.setItem('mreward_user', userId);
        document.getElementById('user-id').innerText = "ID: " + userId;

        // Initialize User Data
        onValue(ref(db, 'users/' + userId), (snapshot) => {
            const data = snapshot.val();
            if(data) {
                document.getElementById('balance').innerText = data.coins || 0;
                document.getElementById('wallet-balance').innerText = data.coins || 0;
                document.getElementById('ref-code').innerText = data.refCode || userId;
            } else {
                set(ref(db, 'users/' + userId), {
                    coins: 0,
                    refCode: userId,
                    dailyStreak: 0,
                    lastClaim: 0
                });
            }
        });

        // Navigation Logic
        window.showPage = (pageId) => {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden-section'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            document.getElementById(pageId).classList.remove('hidden-section');
            document.getElementById('nav-' + pageId).classList.add('nav-active');
        };

        // Confetti for Rewards
        window.triggerReward = () => {
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        };

        // Withdrawal Mockup
        window.withdraw = (amount, method) => {
            get(ref(db, 'users/' + userId)).then(snap => {
                const coins = snap.val().coins;
                if(coins >= amount) {
                    const reqRef = ref(db, 'withdrawals');
                    push(reqRef, { userId, amount, method, status: 'pending', date: Date.now() });
                    update(ref(db, 'users/' + userId), { coins: coins - amount });
                    alert("Request Sent Successfully!");
                } else {
                    alert("Insufficient Coins!");
                }
            });
        };
    </script>
</body>
</html>